#!/bin/bash

set -e  # Exit on any error
echo "ðŸš€ Pre-push checks starting..."

# 1. Knip unused files/exports scan
echo "ðŸŸ¡ [1/2] Scanning for unused files/exports with Knip..."
if npx knip --no-progress; then
    echo "ðŸŸ¢ Knip scan completed - no unused code found"
else
    echo "ðŸ”´ Knip found unused files or exports"
    exit 1
fi

# 2. Production build verification
echo "ðŸŸ¡ [2/2] Running production build verification..."
if npm run build --if-present; then
    echo "ðŸŸ¢ Production build completed successfully"
else
    echo "ðŸ”´ Production build failed"
    exit 1
fi

echo "âœ… All pre-push checks passed"
