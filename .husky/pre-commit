#!/bin/bash

set -e  # Exit on any error
echo "ðŸš€ Pre-commit checks starting..."

# 1. Prettier formatting
echo "ðŸŸ¡ [1/3] Code formatting with Prettier..."
if npx prettier --write .; then
    echo "ðŸŸ¢ Formatting completed successfully"
else
    echo "ðŸ”´ Formatting failed"
    exit 1
fi

# 2. ESLint fixing
echo "ðŸŸ¡ [2/3] Linting and auto-fixing with ESLint..."
if npx eslint --fix .; then
    echo "ðŸŸ¢ Linting completed successfully"
else
    echo "ðŸ”´ Linting failed"
    exit 1
fi

# 3. TypeScript type checking
echo "ðŸŸ¡ [3/3] Type checking with TypeScript..."
if npx tsc --noEmit --skipLibCheck; then
    echo "ðŸŸ¢ Type checking passed"
else
    echo "ðŸ”´ Type checking failed"
    exit 1
fi

echo "âœ… All pre-commit checks passed"